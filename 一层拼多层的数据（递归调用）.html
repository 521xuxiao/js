<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
    </head>
    <body>
        <script type="text/javascript">
            window.onload = function() {
                var arr = [
                    {parent: '#', id: 1},

                    {parent: '1', id: 2},
                    {parent: '1', id: 3},
                    {parent: '1', id: 4},
                    {parent: '4', id: 5},
                    {parent: '5', id: 6},
                    {parent: '6', id: 7},
                    {parent: '8', id: 8}
                ]

                var newArr = [];

                for(var i=0;i<arr.length; i++) {
                    if(arr[i].parent == "#") {
                        newArr.push({parent: arr[i].parent, id: arr[i].id});
                    }
                }

                // 递归循环
                test(newArr);
                function test(item) {
                    for(var i=0;i<item.length;i++) {
                        var midleArr = [];
                        for(var j=0;j<arr.length;j++) {
                            if(item[i].id == arr[j].parent) {
                                midleArr.push({parent: arr[j].parent, id: arr[j].id});
                            }
                        }
                        if(midleArr.length != 0) {
                            test(midleArr);
                            item[i].children = midleArr;
                        }
                    }
                }
                console.log(newArr);
            }
        </script>
    </body>
</html>
